<!-- ===== VCL Modal YouTube (auto-open, small, premium) ===== -->
<!-- Cole isto antes do </body> do teu index.html -->
<style>
/* Modal minimal & premium gold */
#videoModal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  background: rgba(0,0,0,0.55);
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
}
#videoModal.open { opacity: 1; pointer-events: auto; }

/* modal box */
#videoModal .box {
  width: 360px;
  max-width: 92%;
  background: linear-gradient(180deg,#0b0b0b,#0f0f0f);
  border-radius: 12px;
  border: 2px solid rgba(212,175,55,0.14);
  box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  overflow: hidden;
  position: relative;
}

/* header with gold accent */
#videoModal .box .hdr {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  background: linear-gradient(90deg, rgba(212,175,55,0.06), transparent);
}
#videoModal .box .hdr .title {
  color:#f4d35e;
  font-weight:700;
  font-size:0.95rem;
}
#videoModal .box .hdr .close {
  background:#d4af37;
  color:#000;
  border-radius:6px;
  padding:6px 8px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 6px 16px rgba(212,175,55,0.18);
}

/* iframe responsive 16:9 */
#videoModal .player {
  position:relative;
  width:100%;
  padding-top:56.25%; /* 16:9 */
}
#videoModal .player iframe {
  position:absolute;
  top:0; left:0; width:100%; height:100%;
  border:0;
}

/* small floating CTA if autoplay blocked (hidden by default) */
#videoModal .poster {
  display:none;
  position:absolute;
  inset:0;
  align-items:center;
  justify-content:center;
  background:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.5));
}
#videoModal .poster .playBtn {
  background:#d4af37;
  color:#000;
  padding:10px 18px;
  border-radius:50px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 10px 30px rgba(212,175,55,0.2);
}

/* make modal smaller on tiny screens */
@media (max-width:420px){
  #videoModal .box{ width:320px; }
  #videoModal .box .hdr .title{font-size:0.85rem;}
}
</style>

<div id="videoModal" aria-hidden="true">
  <div class="box" role="dialog" aria-modal="true" aria-label="Intro video">
    <div class="hdr">
      <div class="title">Welcome — Quick Intro</div>
      <div class="close" id="closeVideo">CLOSE</div>
    </div>

    <div class="player" id="vplayer">
      <!-- EMBED: substitui o ID do vídeo abaixo se mudares -->
      <iframe id="ytFrame"
        src="https://www.youtube.com/embed/q6wvxJZtQJU?autoplay=1&mute=1&playsinline=1&rel=0&modestbranding=1"
        allow="autoplay; encrypted-media; accelerometer; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>

      <!-- fallback / overlay (aparece se autoplay for bloqueado) -->
      <div class="poster" id="poster">
        <div class="playBtn" id="playBtn">Play Video</div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const modal = document.getElementById('videoModal');
  const closeBtn = document.getElementById('closeVideo');
  const poster = document.getElementById('poster');
  const playBtn = document.getElementById('playBtn');
  const iframe = document.getElementById('ytFrame');

  // abrir modal automático (com pequeno delay para não travar carregamento)
  window.addEventListener('load', function(){
    setTimeout(openModal, 700); // 0.7s
  });

  function openModal(){
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');

    // tenta verificar se o autoplay foi permitido (verifica se vídeo reproduz)
    // Nota: não há API cross-origin direta para saber estado do yt iframe.
    // Estratégia: mostre o poster se o navegador não permitir som/autoplay após 1.4s.
    setTimeout(function(){
      // tentar enviar mensagem para o iframe para ver se responde (não confiável)
      // em vez disso, mostramos poster como fallback para o usuário clicar
      // se o autoplay for bloqueado o usuário verá o poster play.
      poster.style.display = 'flex';
      // se autoplay estiver ok, o usuário ainda pode clicar pause/close.
    }, 1400);
  }

  // fechar modal
  closeBtn.addEventListener('click', function(){
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
    // parada segura do vídeo removendo src (para não continuar em background)
    iframe.src = '';
  });

  // play manual fallback: recoloca src com autoplay=1 (quando o autoplay tinha sido bloqueado)
  playBtn.addEventListener('click', function(e){
    e.preventDefault();
    // recoloca src com autoplay e sem mute (se quiseres som: retirar &mute=1)
    iframe.src = 'https://www.youtube.com/embed/q6wvxJZtQJU?autoplay=1&playsinline=1&rel=0&modestbranding=1';
    poster.style.display = 'none';
  });

  // click fora fecha (opcional)
  modal.addEventListener('click', function(e){
    if(e.target === modal){
      closeBtn.click();
    }
  });
})();
</script>
<!-- ===== FIM VCL ===== -->
